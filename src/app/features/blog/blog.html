<div class="page-container container">
  <h1 class="page-title" jslAnimateOnScroll>{{ 'BLOG.TITLE' | translate }}</h1>
  <p class="page-subtitle" jslAnimateOnScroll>{{ 'BLOG.SUBTITLE' | translate }}</p>

  <div class="blog-controls" jslAnimateOnScroll>
    <div class="search-bar">
      <lucide-icon name="Search"></lucide-icon>
      <input
        type="text"
        [placeholder]="'Buscar artículos...' | translate"
        (input)="onSearch($event)"
      />
    </div>

    <div class="tag-filters">
      <button
        (click)="selectTag(null)"
        [class.active]="selectedTag() === null"
      >
        {{ 'Todos' | translate }}
      </button>
      @for (tag of allTags(); track tag) {
        <button (click)="selectTag(tag)" [class.active]="selectedTag() === tag">
          {{ tag | titlecase }}
        </button>
      }
    </div>
  </div>
  @if (featuredPost(); as post) {
    <div class="featured-post-card" jslAnimateOnScroll>
      <a [routerLink]="['/', currentLang, 'blog', post.slug]" class="featured-post__image">
        <img [src]="post.imageUrl" [alt]="'BLOG.' + post.key + '_TITLE' | translate" />
      </a>
      <div class="featured-post__content">
        <span class="featured-post__eyebrow">
          <lucide-icon name="Star"></lucide-icon> {{ 'Artículo Destacado' | translate }}
        </span>
        <h2 class="featured-post__title">
          <a [routerLink]="['/', currentLang, 'blog', post.slug]">
            {{ 'BLOG.' + post.key + '_TITLE' | translate }}
          </a>
        </h2>
        <p class="featured-post__excerpt">
          {{ 'BLOG.' + post.key + '_EXCERPT' | translate }}
        </p>
        <div class="featured-post__meta">
          <span class="meta-item">
            <lucide-icon name="Calendar"></lucide-icon>
            {{ post.date | date : 'longDate' }}
          </span>
          <span class="meta-item">
            <lucide-icon name="Clock"></lucide-icon>
            {{ post.readTime }} {{ 'min de lectura' | translate }}
          </span>
        </div>
      </div>
    </div>
  }
  <div class="blog-grid">
    @for (post of regularPosts(); track post.key) {
      <jsl-card
        [imageUrl]="post.imageUrl"
        [title]="'BLOG.' + post.key + '_TITLE' | translate"
        [description]="'BLOG.' + post.key + '_EXCERPT' | translate"
        [link]="['/', currentLang, 'blog', post.slug]"
        jslAnimateOnScroll
      >
      </jsl-card>
    }
  </div>

  @if (regularPosts().length === 0 && !featuredPost()) {
    <p class="no-results" jslAnimateOnScroll>
      {{ 'No se encontraron artículos con esos filtros.' | translate }}
    </p>
  }
  </div>

<jsl-cta-section
  eyebrowKey="PROJECTS.CTA_EYEBROW"
  titleKey="PROJECTS.CTA_TITLE"
  subtitleKey="PROJECTS.CTA_SUBTITLE"
  [ctaLink]="['/', currentLang, 'projects']"
>
</jsl-cta-section>