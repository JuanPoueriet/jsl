<header class="header">
  @if (isDesktop) {
  <jsl-top-bar></jsl-top-bar>
  }
  <nav class="header__nav container">
    <a [routerLink]="[currentLang, 'home']" class="header__logo" (click)="closeMobileMenu()">
      JSL Technology
    </a>

    <ul class="header__nav-links">
      <li class="dropdown" [class.open]="openDropdown === 'solutions'">
        <button class="dropdown-toggle" (click)="toggleDropdown('solutions', $event)">
          {{ 'HEADER.SERVICES' | translate }}
          <lucide-icon name="ChevronDown"></lucide-icon>
        </button>
        <div class="dropdown-menu" [class.open]="openDropdown === 'solutions'">
          <a
            [routerLink]="[currentLang, 'solutions']"
            routerLinkActive="active"
            [routerLinkActiveOptions]="{ exact: true }"
            (click)="closeMobileMenu()"
            >{{ 'HEADER.VIEW_ALL_SERVICES' | translate }}</a
          >
          <a
            [routerLink]="[currentLang, 'solutions', 'web-development']"
            routerLinkActive="active"
            (click)="closeMobileMenu()"
            >{{ 'SERVICES_LIST.WEB' | translate }}</a
          >
          <a
            [routerLink]="[currentLang, 'solutions', 'mobile-apps']"
            routerLinkActive="active"
            (click)="closeMobileMenu()"
            >{{ 'SERVICES_LIST.MOBILE' | translate }}</a
          >
          <a
            [routerLink]="[currentLang, 'solutions', 'desktop-software']"
            routerLinkActive="active"
            (click)="closeMobileMenu()"
            >{{ 'SERVICES_LIST.DESKTOP' | translate }}</a
          >
          <a
            [routerLink]="[currentLang, 'solutions', 'cloud-architecture']"
            routerLinkActive="active"
            (click)="closeMobileMenu()"
            >{{ 'SERVICES_LIST.CLOUD' | translate }}</a
          >
        </div>
      </li>
      
      <li class="dropdown" [class.open]="openDropdown === 'products'">
        <button class="dropdown-toggle" (click)="toggleDropdown('products', $event)">
          {{ 'HEADER.PRODUCTS' | translate }}
          <lucide-icon name="ChevronDown"></lucide-icon>
        </button>
        <div class="dropdown-menu" [class.open]="openDropdown === 'products'">
          <a
            [routerLink]="[currentLang, 'products']"
            routerLinkActive="active"
            [routerLinkActiveOptions]="{ exact: true }"
            (click)="closeMobileMenu()"
            >{{ 'HEADER.VIEW_ALL_PRODUCTS' | translate }}</a
          >
          <a
            [routerLink]="[currentLang, 'products', 'jsl-erp']"
            routerLinkActive="active"
            (click)="closeMobileMenu()"
            >{{ 'PRODUCTS_LIST.ERP' | translate }}</a
          >
          <a
            [routerLink]="[currentLang, 'products', 'jsl-pos']"
            routerLinkActive="active"
            (click)="closeMobileMenu()"
            >{{ 'PRODUCTS_LIST.POS' | translate }}</a
          >
          <a
            [routerLink]="[currentLang, 'products', 'proprietary-apps']"
            routerLinkActive="active"
            (click)="closeMobileMenu()"
            >{{ 'PRODUCTS_LIST.MOBILE' | translate }}</a
          >
        </div>
      </li>

      <li class="dropdown" [class.open]="openDropdown === 'company'">
        <button class="dropdown-toggle" (click)="toggleDropdown('company', $event)">
          {{ 'FOOTER.COMPANY' | translate }}
          <lucide-icon name="ChevronDown"></lucide-icon>
        </button>
        <div class="dropdown-menu" [class.open]="openDropdown === 'company'">
          <a
            [routerLink]="[currentLang, 'about-us']"
            routerLinkActive="active"
            (click)="closeMobileMenu()"
            >{{ 'HEADER.ABOUT' | translate }}</a
          >
          <a
            [routerLink]="[currentLang, 'process']"
            routerLinkActive="active"
            (click)="closeMobileMenu()"
            >{{ 'HEADER.PROCESS' | translate }}</a
          >
          <a
            [routerLink]="[currentLang, 'tech-stack']"
            routerLinkActive="active"
            (click)="closeMobileMenu()"
            >{{ 'HEADER.TECH_STACK' | translate }}</a
          >
          <a
            [routerLink]="[currentLang, 'careers']"
            routerLinkActive="active"
            (click)="closeMobileMenu()"
            >{{ 'HEADER.CAREERS' | translate }}</a
          >
        </div>
      </li>

      <li class="dropdown" [class.open]="openDropdown === 'resources'">
        <button class="dropdown-toggle" (click)="toggleDropdown('resources', $event)">
          {{ 'FOOTER.RESOURCES' | translate }}
          <lucide-icon name="ChevronDown"></lucide-icon>
        </button>
        <div class="dropdown-menu" [class.open]="openDropdown === 'resources'">
          <a
            [routerLink]="[currentLang, 'projects']"
            routerLinkActive="active"
            [routerLinkActiveOptions]="{ exact: true }"
            (click)="closeMobileMenu()"
          >
            {{ 'HEADER.PROJECTS' | translate }}
          </a>
          <a
            [routerLink]="[currentLang, 'blog']"
            routerLinkActive="active"
            (click)="closeMobileMenu()"
            >{{ 'HEADER.BLOG' | translate }}</a
          >
          <a
            [routerLink]="[currentLang, 'faq']"
            routerLinkActive="active"
            (click)="closeMobileMenu()"
            >{{ 'HEADER.FAQ' | translate }}</a
          >
        </div>
      </li>

      <li class="header__nav-cta">
        <a
          [routerLink]="[currentLang, 'contact']"
          routerLinkActive="active"
          (click)="closeMobileMenu()"
        >
          {{ 'HEADER.CONTACT' | translate }}
        </a>
      </li>
    </ul>
    <div class="header__controls">
      <jsl-language-switcher class="header__mobile-lang-switcher"></jsl-language-switcher>
      <button class="header__mobile-toggle" (click)="toggleMobileMenu()" aria-label="Toggle menu">
        @if (!isMobileMenuOpen) {
        <lucide-icon name="Menu"></lucide-icon>
        } @else {
        <lucide-icon name="X"></lucide-icon>
        }
      </button>
    </div>
  </nav>

  @if (isMobileMenuOpen) {
  <ul class="header__nav-links-mobile" [class.open]="isMobileMenuOpen">
    <li class="mobile-menu-header">{{ 'HEADER.SERVICES' | translate }}</li>
    <li>
      <a
        [routerLink]="[currentLang, 'solutions']"
        routerLinkActive="active"
        [routerLinkActiveOptions]="{ exact: true }"
        (click)="closeMobileMenu()"
        >{{ 'HEADER.VIEW_ALL_SERVICES' | translate }}</a
      >
    </li>
    <li>
      <a
        [routerLink]="[currentLang, 'solutions', 'web-development']"
        routerLinkActive="active"
        (click)="closeMobileMenu()"
        >{{ 'SERVICES_LIST.WEB' | translate }}</a
      >
    </li>
    <li>
      <a
        [routerLink]="[currentLang, 'solutions', 'mobile-apps']"
        routerLinkActive="active"
        (click)="closeMobileMenu()"
        >{{ 'SERVICES_LIST.MOBILE' | translate }}</a
      >
    </li>
    <li>
      <a
        [routerLink]="[currentLang, 'solutions', 'desktop-software']"
        routerLinkActive="active"
        (click)="closeMobileMenu()"
        >{{ 'SERVICES_LIST.DESKTOP' | translate }}</a
      >
    </li>
    <li>
      <a
        [routerLink]="[currentLang, 'solutions', 'cloud-architecture']"
        routerLinkActive="active"
        (click)="closeMobileMenu()"
        >{{ 'SERVICES_LIST.CLOUD' | translate }}</a
      >
    </li>

    <li class="mobile-menu-header">{{ 'HEADER.PRODUCTS' | translate }}</li>
    <li>
      <a
        [routerLink]="[currentLang, 'products']"
        routerLinkActive="active"
        [routerLinkActiveOptions]="{ exact: true }"
        (click)="closeMobileMenu()"
        >{{ 'HEADER.VIEW_ALL_PRODUCTS' | translate }}</a
      >
    </li>
    <li>
      <a
        [routerLink]="[currentLang, 'products', 'jsl-erp']"
        routerLinkActive="active"
        (click)="closeMobileMenu()"
        >{{ 'PRODUCTS_LIST.ERP' | translate }}</a
      >
    </li>
    <li>
      <a
        [routerLink]="[currentLang, 'products', 'jsl-pos']"
        routerLinkActive="active"
        (click)="closeMobileMenu()"
        >{{ 'PRODUCTS_LIST.POS' | translate }}</a
      >
    </li>
    <li>
      <a
        [routerLink]="[currentLang, 'products', 'proprietary-apps']"
        routerLinkActive="active"
        (click)="closeMobileMenu()"
        >{{ 'PRODUCTS_LIST.MOBILE' | translate }}</a
      >
    </li>

    <li class="mobile-menu-header">{{ 'FOOTER.COMPANY' | translate }}</li>
    <li>
      <a
        [routerLink]="[currentLang, 'about-us']"
        routerLinkActive="active"
        (click)="closeMobileMenu()"
        >{{ 'HEADER.ABOUT' | translate }}</a
      >
    </li>
    <li>
      <a
        [routerLink]="[currentLang, 'process']"
        routerLinkActive="active"
        (click)="closeMobileMenu()"
        >{{ 'HEADER.PROCESS' | translate }}</a
      >
    </li>
    <li>
      <a
        [routerLink]="[currentLang, 'tech-stack']"
        routerLinkActive="active"
        (click)="closeMobileMenu()"
        >{{ 'HEADER.TECH_STACK' | translate }}</a
      >
    </li>
    <li>
      <a
        [routerLink]="[currentLang, 'careers']"
        routerLinkActive="active"
        (click)="closeMobileMenu()"
        >{{ 'HEADER.CAREERS' | translate }}</a
      >
    </li>

    <li class="mobile-menu-header">{{ 'FOOTER.RESOURCES' | translate }}</li>
    <li>
      <a
        [routerLink]="[currentLang, 'projects']"
        routerLinkActive="active"
        (click)="closeMobileMenu()"
        >{{ 'HEADER.PROJECTS' | translate }}</a
      >
    </li>
    <li>
      <a [routerLink]="[currentLang, 'blog']" routerLinkActive="active" (click)="closeMobileMenu()">{{
        'HEADER.BLOG' | translate
      }}</a>
    </li>
    <li>
      <a [routerLink]="[currentLang, 'faq']" routerLinkActive="active" (click)="closeMobileMenu()">{{
        'HEADER.FAQ' | translate
      }}</a>
    </li>

    <li class="mobile-menu-header">{{ 'HEADER.CONTACT' | translate }}</li>
    <li>
      <a
        [routerLink]="[currentLang, 'contact']"
        routerLinkActive="active"
        (click)="closeMobileMenu()"
        >{{ 'HEADER.CONTACT' | translate }}</a
      >
    </li>
  </ul>
  }
  </header>